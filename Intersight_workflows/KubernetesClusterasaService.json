[{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Delete Cisco Intersight Platform Managed Object","Label":"Delete Managed Object","Name":"DeleteManagedObject","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The type of object that should be deleted","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"Dropdown"},"Label":"Object Type","Name":"objecttype","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"kubernetes/AddonPolicies","ObjectType":"workflow.EnumEntry","Value":"/api/v1/kubernetes/AddonPolicies"},{"Label":"kubernetes/ContainerRuntimePolicies","ObjectType":"workflow.EnumEntry","Value":"/api/v1/kubernetes/ContainerRuntimePolicies"},{"Label":"kubernetes/VersionPolicies","ObjectType":"workflow.EnumEntry","Value":"/api/v1/kubernetes/VersionPolicies"},{"Label":"kubernetes/NetworkPolicies","ObjectType":"workflow.EnumEntry","Value":"/api/v1/kubernetes/NetworkPolicies"},{"Label":"kubernetes/SysConfigPolicies","ObjectType":"workflow.EnumEntry","Value":"/api/v1/kubernetes/SysConfigPolicies"},{"Label":"kubernetes/NodeGroupProfiles","ObjectType":"workflow.EnumEntry","Value":"/api/v1/kubernetes/NodeGroupProfiles"},{"Label":"kubernetes/TrustedRegistriesPolicies","ObjectType":"workflow.EnumEntry","Value":"/api/v1/kubernetes/TrustedRegistriesPolicies"},{"Label":"kubernetes/VirtualMachineInfraConfigPolicies","ObjectType":"workflow.EnumEntry","Value":"/api/v1/kubernetes/VirtualMachineInfraConfigPolicies"},{"Label":"kubernetes/VirtualMachineInstanceTypes","ObjectType":"workflow.EnumEntry","Value":"/api/v1/kubernetes/VirtualMachineInstanceTypes"},{"Label":"iam/ApiKeys","ObjectType":"workflow.EnumEntry","Value":"/api/v1/iam/ApiKeys"},{"Label":"kubernetes/ClusterAddonProfiles","ObjectType":"workflow.EnumEntry","Value":"/api/v1/kubernetes/ClusterAddonProfiles"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Moid of the object that should be deleted","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Moid","Name":"moid","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[],"RetryCount":5,"RetryDelay":20,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[],"SharedScope":"user","Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Create Cisco Intersight Kubernetes Version Policy","Label":"Create Kubernetes Version Policy","Name":"CreateKubernetesVersionPolicy","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The name of the Kubernetes Version Policy to be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Name","Name":"name","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Kubernetes version that will be applied to the Kubernetes Version Policy","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Version","Name":"version","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["KubernetesVersion"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/Versions","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Moid of the created Kubernetes Version Policy","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Moid","Name":"moid","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"RetryCount":5,"RetryDelay":60,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[{"CatalogMoid":"user","Description":"Delete Cisco Intersight Platform Managed Object","InputParameters":{"moid":"${task.output.moid}","objecttype":"/api/v1/kubernetes/VersionPolicies"},"Name":"DeleteManagedObject","ObjectType":"workflow.RollbackTask","Version":1}],"SharedScope":"user","Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Create Cisco Intersight Kubernetes Add-Ons Policy","Label":"Create Add-Ons Policy","Name":"CreateAdd-OnsPolicy","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The name of the Add-Ons policy that will be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Name","Name":"name","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":1000,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Add-on that will be installed on the Kubernetes cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Add-On","Name":"addon","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid","DefaultInstallStrategy","DefaultUpgradeStrategy"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/AddonDefinitions","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The namespace in which the Add-On will be installed","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Namespace","Name":"namespace","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Overrides for the Add-On","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Overrides","Name":"overrides","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The installation strategy for the Add-On","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"Dropdown"},"Label":"Install Strategy","Name":"installstrategy","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"No Action","ObjectType":"workflow.EnumEntry","Value":"NoAction"},{"Label":"Install Only","ObjectType":"workflow.EnumEntry","Value":"InstallOnly"},{"Label":"Always","ObjectType":"workflow.EnumEntry","Value":"Always"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The upgrade strategy for the Add-On","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"Dropdown"},"Label":"Upgrade Strategy","Name":"upgradestrategy","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"No Action","ObjectType":"workflow.EnumEntry","Value":"NoAction"},{"Label":"Upgrade Only","ObjectType":"workflow.EnumEntry","Value":"UpgradeOnly"},{"Label":"Reinstall on Failure","ObjectType":"workflow.EnumEntry","Value":"ReinstallOnFailure"},{"Label":"Always Reinstall","ObjectType":"workflow.EnumEntry","Value":"AlwaysReinstall"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Moid of the created Add-Ons Policy","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Moid","Name":"moid","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"RetryCount":5,"RetryDelay":60,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[{"CatalogMoid":"user","Description":"Delete Cisco Intersight Platform Managed Object","InputParameters":{"moid":"${task.output.moid}","objecttype":"/api/v1/kubernetes/AddonPolicies"},"Name":"DeleteManagedObject","ObjectType":"workflow.RollbackTask","Version":1}],"SharedScope":"user","Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Delete Cisco Intersight Kubernetes Cluster Profile","Label":"Delete Cluster Profile","Name":"DeleteClusterProfile","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Moid of the Cluster Profile that should be deleted","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Moid","Name":"moid","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[],"RetryCount":256,"RetryDelay":20,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[],"SharedScope":"user","Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Create Cisco Intersight Kubernetes Cluster Profile","Label":"Create Cluster Profile","Name":"CreateClusterProfile","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The name of the Cluster Profile to be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Name","Name":"name","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The SSH key that should be deposited on the Kubernetes cluster to allow for SSH access","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"SSH Key","Name":"sshkey","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The IP Pool that will be used for Cluster-level IP addresses, such as load balancers","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"IP Pool","Name":"ippool","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/ippool/Pools","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The amount of load balancer IPs deployed for this cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Load Balancer Count","Name":"loadbalancercount","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":100,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"integer"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Container Runtime policy used for this cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Container Runtime Policy","Name":"runtimeconfig","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/ContainerRuntimePolicies","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Network CIDR policy used for this cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Network CIDR Policy","Name":"netconfig","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/NetworkPolicies","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Node OS Configuration policy used for this cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Node OS Configuration Policy","Name":"sysconfig","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/SysConfigPolicies","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Trusted Certificate Authorities policy used for this cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Trusted Certificate Authorities Policy","Name":"trustedcertauth","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The AddOns that will be deployed on this cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"AddOn Profile","Name":"addons","ObjectType":"workflow.ArrayDataType"}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Moid of the Cluster Profile that was created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Moid","Name":"moid","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Moid of the cluster assocaited with this ClusterProfile","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"AssociatedClusterMoid","Name":"associatedclustermoid","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"RetryCount":5,"RetryDelay":60,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[{"CatalogMoid":"user","Description":"Delete Cisco Intersight Kubernetes Cluster Profile","InputParameters":{"moid":"${task.output.moid}"},"Name":"DeleteClusterProfile","ObjectType":"workflow.RollbackTask","Version":1}],"SharedScope":"user","Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Description":"This data type takes holds information about a formatted string.","Label":"Formatted Text","Name":"FormattedText","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The content type of the request. Currently supports JSON and Text.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Content Type","Name":"ContentType","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"JSON","ObjectType":"workflow.EnumEntry","Value":"json"},{"Label":"Text","ObjectType":"workflow.EnumEntry","Value":"text"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The content of the formatted text that can spawn multiple lines.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Text","Name":"Text","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"The types of values that can be extracted from API responses in IO Generic API tasks.","Label":"Response Parameter Type","Name":"ResponseParameterTypeEnum","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The types of values that can be extracted from API responses in IO Generic API tasks. The JSON type can be used to extract any type of value from response as a parameter.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Parameter Type","Name":"ParameterType","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"String","ObjectType":"workflow.EnumEntry","Value":"string"},{"Label":"Integer","ObjectType":"workflow.EnumEntry","Value":"integer"},{"Label":"Float","ObjectType":"workflow.EnumEntry","Value":"float"},{"Label":"Boolean","ObjectType":"workflow.EnumEntry","Value":"boolean"},{"Label":"JSON","ObjectType":"workflow.EnumEntry","Value":"json"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Description":"This data type takes information about a parameter that needs to be extracted from an API response in Generic API tasks.","Label":"Response Parameter","Name":"ResponseParameter","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The content specific path information that identifies the parameter value within the content. The value is usually a XPath or JSONPath or a regular expression in case of text content.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Path","Name":"Path","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Name of the response parameter.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Name","Name":"Name","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The response parameter type - will be one of string, integer, float, boolean, complex or collection. If the type is not specified, parameter will be considered of string type by default.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Type","Name":"Type","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"ResponseParameterTypeEnum","ObjectType":"workflow.CustomDataProperty"}}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Description":"Response parser framework supports extraction of required values from API/device responses. These responses may be of various content types such as XML, JSON, etc. The values of importance are modeled as parameters in the response parser framework.\nThe parameters can be of a scalar value type or a collection of values. A group of related parameters can be modeled as a single complex type parameter. These complex types will be very useful to extract a set of repeating group of related parameters.\nA response parser specification defines the set of parameters that need to be extracted from the content. The response parser specification allows complex type definitions to be defined for any complex parameters.","Label":"Response Parser","Name":"ResponseParserType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"ArrayItemType":{"ObjectType":"workflow.CustomArrayItem","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"ResponseParameter","ObjectType":"workflow.CustomDataProperty"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The collection of parameters that need to be extracted from the API response.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Parameters","Max":10,"Min":1,"Name":"Parameters","ObjectType":"workflow.ArrayDataType"}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"The outcome type specifies status of the task to be set when the outcome condition evaluates to true.","Label":"Outcome Type Enum","Name":"OutcomeTypeEnum","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The outcome type specifies status of the task to be set when the outcome condition evaluates to true.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Outcome Type","Name":"OutcomeType","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"Success","ObjectType":"workflow.EnumEntry","Value":"Success"},{"Label":"Error","ObjectType":"workflow.EnumEntry","Value":"Error"},{"Label":"Skip Task Execution","ObjectType":"workflow.EnumEntry","Value":"SkipTaskExecution"},{"Label":"Terminal Error","ObjectType":"workflow.EnumEntry","Value":"TerminalError"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Description":"Intersight Orchestrator allows the users to specify the different API outcomes.\nThe task status message for an outcome can be specified. An outcome can be qualified as recoverable/non-recoverable error condition.","Label":"Outcome","Name":"Outcome","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The user friendly name given to the task outcome.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Name","Name":"Name","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The condition expression that uses a golang template logical expression to mark this outcome when the condition evaluates to true for the task execution.\nThe condition can refer outputs extracted via the response parser. The format to refer the captured output is {{.local.response.<captured-parameter-name>}}.\nLets say we have defined 'Name' in the response parser specification and in the condition we want to check if the extracted output 'Name' equals to string value 'Test', condition looks like - {{eq .local.response.Name \"Test\"}}. Make sure to enclose the value within double quotes if it is of string datatype.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Condition","Name":"Condition","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The message to be shown when the outcome specified by condition occurs. Message can have references to the response\nparser captured output.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Message","Name":"Message","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The outcome type based on which task status is updated accordingly. Following outcome types are defined. 1. Success              - Indicates that the outcome is a success and task execution status is marked as 'success'.\n2. Error                - Indicates that the outcome is an error and task execution status is marked as 'failed'.\n3. Skip Task Execution  - Indicates that the task needs to be skipped based on the condition specified and\n                          mark the execution status as 'NO_OP'.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Type of the outcome","Name":"Type","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"OutcomeTypeEnum","ObjectType":"workflow.CustomDataProperty"}}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","Description":"Invokes the given Web API against the given endpoint. The endpoint can be Intersight API or an external endpoint added as Target in Intersight. Please refer Supported Endpoints section in the Web API request end user documentation for the list of Intersight Targets on which Web API task can be invoked.\n","Label":"Invoke Web API Request","Name":"InvokeGenericWebApi","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The API call can be made to Intersight or an external endpoint added as Target. Target should be in claimed or connected state. Please refer Supported Endpoints section in the Web API request end user documentation for the list of Intersight Targets on which Web API task can be invoked. An empty value for this input indicates that the API call is made to Intersight.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"External Target","Name":"Target","ObjectType":"workflow.TargetDataType","Properties":[{"DisplayAttributes":["Name","TargetType"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/asset/Targets?$filter=((TargetType eq HTTPEndpoint and Status eq Claimed) or ((TargetType eq PureStorageFlashArray or TargetType eq HitachiVirtualStoragePlatform or TargetType eq NetAppActiveIqUnifiedManager or TargetType eq TerraformCloud or TargetType eq VmwareVcenter or TargetType eq APIC) and Status eq Connected))","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"SupportedObjects":["asset.Target"]}]},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"HTTP protocol to be used - HTTP, HTTPS. Populated implicitly by fetching the value from target task input if API endpoint is added as target within Intersight. Default value of HTTPS is set if not specified in other scenarios.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Protocol","Name":"Protocol","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"HTTP","ObjectType":"workflow.EnumEntry","Value":"http"},{"Label":"HTTPS","ObjectType":"workflow.EnumEntry","Value":"https"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"HTTP method to be requested on the given URL. If the value is not given, GET is used as default.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Method","Name":"Method","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"GET","ObjectType":"workflow.EnumEntry","Value":"GET"},{"Label":"HEAD","ObjectType":"workflow.EnumEntry","Value":"HEAD"},{"Label":"POST","ObjectType":"workflow.EnumEntry","Value":"POST"},{"Label":"PUT","ObjectType":"workflow.EnumEntry","Value":"PUT"},{"Label":"PATCH","ObjectType":"workflow.EnumEntry","Value":"PATCH"},{"Label":"DELETE","ObjectType":"workflow.EnumEntry","Value":"DELETE"},{"Label":"OPTIONS","ObjectType":"workflow.EnumEntry","Value":"OPTIONS"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Relative URL for Intersight, Device Registration and Target APIs. Does not support specifying fully qualified URL.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"URL","Name":"Url","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The request headers that need to be sent in the request in key value pairs list.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Headers","Name":"Headers","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"json"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The key value pairs given in this input will be sent in HTTP 'Cookie' header.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Cookies","Name":"Cookies","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"json"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The type of the response. Currently supports JSON.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Response Type","Name":"ContentType","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"JSON","ObjectType":"workflow.EnumEntry","Value":"json"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The optional request body that is sent as part of this API request. The request body can contain golang templates that can be populated with task input parameters and previous API output parameters.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Body","Name":"Body","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"FormattedText","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The structure of the response parser shall provide the list of values that need to be extracted from the API response.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Response Parser","Name":"ResponseParser","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"ResponseParserType","ObjectType":"workflow.CustomDataProperty"}},{"ArrayItemType":{"ObjectType":"workflow.CustomArrayItem","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"Outcome","ObjectType":"workflow.CustomDataProperty"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Allows to capture the possible outcomes of this API. This is a collection of outcomes which gets evaluated in the order they are given. If an outcome condition evaluates to 'true', status of the task can be set to one of the supported types - Success, Error or no operation and also an optional task execution message can be set.\nAt the end of the outcomes list, a catchall success/fail outcome can be added with condition explicitly set as 'true'. This allows to mark the status of task execution either success or failure when none of the previous outcomes match.\nWhen no outcomes is specified, default behaviour is to mark the API execution status 'success' if obtained HTTP status code is 2xx else mark it as 'failed'.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Outcomes","Max":10,"Name":"Outcomes","ObjectType":"workflow.ArrayDataType"}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The response headers that are extracted from the API response.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Headers","Name":"Headers","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"json"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The list of cookies obtained from the response in the form of key value pairs.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Cookies","Name":"Cookies","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"json"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The HTTP status code of the Web API response.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Status Code","Name":"StatusCode","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"integer"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The HTTP status message of the Web API response.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Status Message","Name":"StatusMessage","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The list of output parameters extracted from the response.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Parameters","Name":"Parameters","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"json"}}],"RetryDelay":60,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":120,"TimeoutPolicy":"Timeout"},"RollbackTasks":[],"SharedScope":"shared","Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Modify Cisco Intersight Kubernetes Cluster AddOn Profile","Label":"Modify Cluster Addon Profile","Name":"ModifyClusterAddonProfile","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Cluster Addon Profile that should be modified","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Cluster Addon Profile","Name":"profile","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/ClusterAddonProfiles","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/AddonPolicies","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The AddOn Policies that should be added to the Profile","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Addon Policies","Max":99,"Name":"policies","ObjectType":"workflow.ArrayDataType"}],"ObjectType":"workflow.Properties","OutputDefinition":[],"RetryCount":5,"RetryDelay":60,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[],"SharedScope":"user","Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Create Cisco Intersight Kubernetes NodeGroup Profile","Label":"Create NodeGroup Profile","Name":"CreateNodeGroupProfile","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The name of the NodeGroup Profile to be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Name","Name":"name","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":1000,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The node type of the NodeGroup Profile to be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"Dropdown"},"Label":"Node Type","Name":"nodetype","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"Control Plane","ObjectType":"workflow.EnumEntry","Value":"ControlPlane"},{"Label":"Worker","ObjectType":"workflow.EnumEntry","Value":"Worker"},{"Label":"Control Plane + Worker","ObjectType":"workflow.EnumEntry","Value":"ControlPlaneWorker"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The desired size of the NodeGroup Profile to be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Desired Size","Name":"desiredsize","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":128,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"integer"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The minimum size of the NodeGroup Profile to be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Minimum Size","Name":"minsize","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":128,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The maximum size of the NodeGroup Profile to be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Maximum Size","Name":"maxsize","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":128,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Kubernetes version of the NodeGroup Profile to be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Kubernetes Version","Name":"k8sversion","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/VersionPolicies","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The IP pool of the NodeGroup Profile to be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"IP Pool","Name":"ippool","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/ippool/Pools","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Cluster Profile to which this NodeGroup profile will be associated","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Cluster Profile","Name":"clusterprofile","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/ClusterProfiles","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Infra Config Policy that should be used for this profile","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Infra Config Policy","Name":"infraconfigpolicy","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/VirtualMachineInfraConfigPolicy","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The instance type that should be used for this profile","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Instance Type","Name":"instancetype","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/VirtualMachineInstanceType","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Moid of the created NodeGroup Profile","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Moid","Name":"moid","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"RetryCount":5,"RetryDelay":60,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[{"CatalogMoid":"user","Description":"Delete Cisco Intersight Platform Managed Object","InputParameters":{"moid":"${task.output.moid}","objecttype":"/api/v1/kubernetes/NodeGroupProfiles"},"Name":"DeleteManagedObject","ObjectType":"workflow.RollbackTask","Version":1}],"SharedScope":"user","Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Undeploy Cisco Intersight Kubernetes Cluster Profile","Label":"Undeploy Cluster Profile","Name":"UndeployClusterProfile","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Moid of the Cluster Profile that should be deleted","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Moid","Name":"moid","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[],"RetryCount":256,"RetryDelay":20,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Retry"},"RollbackTasks":[{"CatalogMoid":"user","Description":"Deploy Cisco Intersight Kubernetes Cluster Profile","InputParameters":{"moid":"${task.input.moid}"},"Name":"DeployClusterProfile","ObjectType":"workflow.RollbackTask","Version":1}],"SharedScope":"user","Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Deploy Cisco Intersight Kubernetes Cluster Profile","Label":"Deploy Cluster Profile","Name":"DeployClusterProfile","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Moid of the Cluster Profile that should be deployed","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Moid","Name":"moid","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/ClusterProfiles","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[],"RetryCount":256,"RetryDelay":20,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Retry"},"RollbackTasks":[{"CatalogMoid":"user","Description":"Undeploy Cisco Intersight Kubernetes Cluster Profile","InputParameters":{"moid":"${task.input.moid}"},"Name":"UndeployClusterProfile","ObjectType":"workflow.RollbackTask","Version":1}],"SharedScope":"user","Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.WorkflowDefinition","DefaultVersion":true,"Description":"Automates the Creation of a Cisco Intersight Kubernetes Service cluster, including additional required policies","InputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The name of the Kubernetes cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Name","Name":"name","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Kubernetes version that will be applied to the Kubernetes Version Policy","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Version","Name":"version","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["KubernetesVersion"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/Versions?$filter=not(Tags/any(t:t/Value eq 'UpgradeRequired' or t/Value eq 'IWE'))","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The SSH key that should be deposited on the Kubernetes cluster to allow for SSH access","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"SSH Key","Name":"sshkey","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The IP Pool that will be used for Cluster-level IP addresses, such as load balancers","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"IP Pool","Name":"ippool","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/ippool/Pools","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Infra Config Policy that should be used for this profile","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Target Cluster","Name":"infraconfigpolicy","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/VirtualMachineInfraConfigPolicies","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue","Override":true,"Value":2},"Description":"The amount of load balancer IPs deployed for this cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Load Balancer Count","Name":"loadbalancercount","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":100,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"integer"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Container Runtime policy used for this cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Container Runtime Policy","Name":"runtimeconfig","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/ContainerRuntimePolicies","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Network CIDR policy used for this cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Network CIDR Policy","Name":"netconfig","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/NetworkPolicies","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Node OS Configuration policy used for this cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Node OS Configuration Policy","Name":"sysconfig","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/SysConfigPolicies","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Trusted Certificate Authorities policy used for this cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Trusted Certificate Authorities Policy","Name":"trustedcertauth","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/TrustedRegistriesPolicies","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue","Override":true,"Value":3},"Description":"The desired size of the NodeGroup Profile to be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"ControlPlane Nodes","Name":"controlplanenodes","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":3,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"integer"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue","Override":true,"Value":4},"Description":"The desired size of the NodeGroup Profile to be created","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Worker Nodes","Name":"workernodes","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":16,"Min":1,"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"integer"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The instance type that should be used for this profile","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Instance Type","Name":"instancetype","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name","Moid"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/VirtualMachineInstanceTypes","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"ArrayItemType":{"ObjectType":"workflow.PrimitiveArrayItem","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/kubernetes/AddonDefinitions?$filter=(Labels ne 'Essential' and Labels ne 'EOL' and Labels ne 'Deprecated')","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Moid"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The Add-on that will be installed on the Kubernetes cluster","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Add-On","Max":99,"Name":"addon","ObjectType":"workflow.ArrayDataType"}],"InputParameterSet":[],"Label":"Kubernetes Cluster as a Service","Name":"KubernetesClusterasaService","ObjectType":"workflow.WorkflowDefinition","OutputDefinition":[],"OutputParameters":{},"Properties":{"EnableDebug":true,"ExternalMeta":true,"ObjectType":"workflow.WorkflowProperties","Retryable":true,"SupportStatus":"Supported"},"SharedScope":"user","Tasks":[{"Name":"StartTask","NextTask":"CreateKubernetesVersionPolicy1","ObjectType":"workflow.StartTask"},{"CatalogMoid":"user","Description":"Create Cisco Intersight Kubernetes Version Policy","InputParameters":{"name":"{{.global.workflow.input.name}}-version-policy","version":"${workflow.input.version}"},"Label":"Create Kubernetes Version Policy","Name":"CreateKubernetesVersionPolicy1","ObjectType":"workflow.WorkerTask","OnSuccess":"parallelLoop1","TaskDefinitionName":"CreateKubernetesVersionPolicy","Version":1},{"Count":"{{len .global.workflow.input.addon}}","Description":"Run this task once for ever Add-On that should be installed on the cluster","Label":"For every Add-On","LoopStartTask":"CreateAddOnsPolicy1","Name":"parallelLoop1","NumberOfBatches":1,"ObjectType":"workflow.LoopTask","OnSuccess":"CreateClusterProfile1","Parallel":true},{"CatalogMoid":"user","Description":"Create Cisco Intersight Kubernetes Add-Ons Policy","InputParameters":{"addon":"{{index .global.workflow.input.addon .iteration}}","name":"{{.global.workflow.input.name}}-addon-policy{{.iteration}}"},"Label":"Create Add-Ons Policy","Name":"CreateAddOnsPolicy1","ObjectType":"workflow.WorkerTask","TaskDefinitionName":"CreateAdd-OnsPolicy","VariableParameters":{},"Version":1},{"CatalogMoid":"user","Description":"Create Cisco Intersight Kubernetes Cluster Profile","InputParameters":{"ippool":"${workflow.input.ippool}","loadbalancercount":"${workflow.input.loadbalancercount}","name":"${workflow.input.name}","netconfig":"${workflow.input.netconfig}","runtimeconfig":"${workflow.input.runtimeconfig}","sshkey":"${workflow.input.sshkey}","sysconfig":"${workflow.input.sysconfig}","trustedcertauth":"${workflow.input.trustedcertauth}"},"Label":"Create Cluster Profile","Name":"CreateClusterProfile1","ObjectType":"workflow.WorkerTask","OnSuccess":"InvokeGenericWebApi1","TaskDefinitionName":"CreateClusterProfile","Version":1},{"CatalogMoid":"shared","Description":"Retrieves information about the ClusterAddonProfile","InputParameters":{"Method":"GET","ResponseParser":{"Parameters":[{"Name":"Moid","Path":"$.Results[0].Moid","Type":"string"}]},"Url":"/api/v1/kubernetes/ClusterAddonProfiles?$filter=AssociatedCluster.Moid eq '{{.global.CreateClusterProfile1.output.associatedclustermoid}}'"},"Label":"Retrieve ClusterAddonProfile","Name":"InvokeGenericWebApi1","ObjectType":"workflow.WorkerTask","OnSuccess":"ModifyClusterAddonProfile1","TaskDefinitionName":"InvokeGenericWebApi","Version":2},{"CatalogMoid":"user","Description":"Modify Cisco Intersight Kubernetes Cluster AddOn Profile","InputParameters":{"profile":"${InvokeGenericWebApi1.output.Parameters.Moid}"},"Label":"Modify Cluster Addon Profile","Name":"ModifyClusterAddonProfile1","ObjectType":"workflow.WorkerTask","OnSuccess":"CreateNodeGroupProfile1","TaskDefinitionName":"ModifyClusterAddonProfile","Version":1},{"CatalogMoid":"user","Description":"Create Cisco Intersight Kubernetes NodeGroup Profile","InputParameters":{"clusterprofile":"${CreateClusterProfile1.output.moid}","desiredsize":"${workflow.input.controlplanenodes}","infraconfigpolicy":"${workflow.input.infraconfigpolicy}","instancetype":"${workflow.input.instancetype}","ippool":"${workflow.input.ippool}","k8sversion":"${CreateKubernetesVersionPolicy1.output.moid}","maxsize":"4","minsize":"1","name":"{{.global.workflow.input.name}}-controlplane-pool","nodetype":"ControlPlane"},"Label":"Create ControlPlane NodeGroup Profile","Name":"CreateNodeGroupProfile1","ObjectType":"workflow.WorkerTask","OnSuccess":"CreateNodeGroupProfile2","TaskDefinitionName":"CreateNodeGroupProfile","Version":1},{"CatalogMoid":"user","Description":"Create Cisco Intersight Kubernetes NodeGroup Profile","InputParameters":{"clusterprofile":"${CreateClusterProfile1.output.moid}","desiredsize":"${workflow.input.workernodes}","infraconfigpolicy":"${workflow.input.infraconfigpolicy}","instancetype":"${workflow.input.instancetype}","ippool":"${workflow.input.ippool}","k8sversion":"${CreateKubernetesVersionPolicy1.output.moid}","maxsize":"16","minsize":"1","name":"{{.global.workflow.input.name}}-worker-pool","nodetype":"Worker"},"Label":"Create Worker NodeGroup Profile","Name":"CreateNodeGroupProfile2","ObjectType":"workflow.WorkerTask","OnSuccess":"DeployClusterProfile1","TaskDefinitionName":"CreateNodeGroupProfile","Version":1},{"CatalogMoid":"user","Description":"Deploy Cisco Intersight Kubernetes Cluster Profile","InputParameters":{"moid":"${CreateClusterProfile1.output.moid}"},"Label":"Deploy Cluster Profile","Name":"DeployClusterProfile1","ObjectType":"workflow.WorkerTask","OnSuccess":"SuccessEndTask","TaskDefinitionName":"DeployClusterProfile","Version":1},{"Name":"SuccessEndTask","ObjectType":"workflow.SuccessEndTask"},{"Name":"FailureEndTask","ObjectType":"workflow.FailureEndTask"}],"UiInputFilters":[],"UiRenderingData":{"Positions":[{"Name":"StartTask","X":273.5,"Y":35},{"Name":"SuccessEndTask","X":273.5,"Y":929},{"Name":"FailureEndTask","X":415.5,"Y":929},{"Name":"CreateClusterProfile1","X":188.5,"Y":401},{"Name":"CreateNodeGroupProfile1","X":188.5,"Y":665},{"Name":"CreateNodeGroupProfile2","X":188.5,"Y":753},{"Name":"DeployClusterProfile1","X":188.5,"Y":841},{"Name":"CreateKubernetesVersionPolicy1","X":188.5,"Y":106},{"Name":"parallelLoop1","X":178.5,"Y":194},{"Name":"CreateAddOnsPolicy1","X":189,"Y":285},{"Name":"InvokeGenericWebApi1","X":188.5,"Y":489},{"Name":"ModifyClusterAddonProfile1","X":188.5,"Y":577}]},"VariableDefinition":[],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/WorkflowDefinitions","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","Description":"Delete Cisco Intersight Platform Managed Object","EndpointRequestType":"Internal","Label":"Delete Cisco Intersight Platform Managed Object","Method":"DELETE","Name":"DeleteCiscoIntersightPlatformManagedObject","ObjectType":"workflow.WebApi","Outcomes":[],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[],"Types":[]},"TargetType":"Local","Url":"{{.global.task.input.objecttype}}/{{.global.task.input.moid}}"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Delete Cisco Intersight Platform Managed Object","Name":"Delete Managed Object","ObjectType":"workflow.BatchApiExecutor","Output":{},"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"DeleteManagedObject\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"Body":"{\r\n    \"Name\":\"{{.global.task.input.name}}\",\r\n    \"Version\":\"{{.global.task.input.version}}\",\r\n    \"Organization\":{\r\n        \"ObjectType\":\"organization.Organization\",\r\n        \"Moid\":\"{{.security.OrganizationMoid}}\"\r\n    }\r\n}","ContentType":"json","Description":"Create Cisco Intersight Kubernetes Version Policy","EndpointRequestType":"Internal","Label":"Create Cisco Intersight Kubernetes Version Policy","Method":"POST","Name":"CreateCiscoIntersightKubernetesVersionPolicy","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":".local.response.HttpStatusCode ne 200","Message":"Failed to create Kubernetes Version Policy","Name":"HTTP Status Code Check","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"moid","ObjectType":"content.Parameter","Path":"$.Moid","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/VersionPolicies"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Create Cisco Intersight Kubernetes Version Policy","Name":"Create Kubernetes Version Policy","ObjectType":"workflow.BatchApiExecutor","Output":{"moid":"{{.global.CreateCiscoIntersightKubernetesVersionPolicy.output.moid}}"},"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"CreateKubernetesVersionPolicy\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"Body":"{\r\n    \"Name\":\"{{.global.task.input.name}}\",\r\n    \"Organization\":{\r\n        \"ObjectType\":\"organization.Organization\",\r\n        \"Moid\":\"{{.security.OrganizationMoid}}\"\r\n    },\r\n    \"AddonDefinition\":\"{{.global.task.input.addon}}\",\r\n    \"AddonConfiguration\":{\r\n        {{with $x := .global.task.input.namespace}}\"ReleaseNamespace\":\"{{$x}}\"{{end}}\r\n        {{with $x := .global.task.input.overrides}}{{with $y := .global.task.input.namespace}},{{end}}\"Overrides\":\"{{$x}}\"{{end}}\r\n        {{with $x := .global.task.input.installstrategy}}{{with $y := .global.task.input.overrides}},{{end}}\"InstallStrategy\":\"{{$x}}\",{{end}}\r\n        {{with $x := .global.task.input.upgradestrategy}}{{with $y := .global.task.input.installstrategy}},{{end}}\"UpgradeStrategy\":\"{{$x}}\"{{end}}\r\n    }\r\n}","ContentType":"json","Description":"Create Cisco Intersight Kubernetes AddOns Policy","EndpointRequestType":"Internal","Label":"Create Cisco Intersight Kubernetes AddOns Policy","Method":"POST","Name":"CreateCiscoIntersightKubernetesAddOnsPolicy","ObjectType":"workflow.WebApi","Outcomes":[],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"moid","ObjectType":"content.Parameter","Path":"$.Moid","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/AddonPolicies"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Create Cisco Intersight Kubernetes Add-Ons Policy","Name":"Create Add-Ons Policy","ObjectType":"workflow.BatchApiExecutor","Output":{"moid":"{{.global.CreateCiscoIntersightKubernetesAddOnsPolicy.output.moid}}"},"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"CreateAdd-OnsPolicy\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","Description":"Validate Cisco Intersight Kubernetes Cluster Profile State","EndpointRequestType":"Internal","Label":"Validate Cisco Intersight Kubernetes Cluster Profile State","Method":"GET","Name":"ValidateCiscoIntersightKubernetesClusterProfileState","ObjectType":"workflow.WebApi","Outcomes":[],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ControlAction","ObjectType":"content.Parameter","Path":"$.ConfigContext.ControlAction","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/ClusterProfiles/{{.global.task.input.moid}}"},{"ContentType":"json","Description":"Delete Cisco Intersight Kubernetes Cluster Profile","EndpointRequestType":"Internal","Label":"Delete Cisco Intersight Kubernetes Cluster Profile","Method":"DELETE","Name":"DeleteCiscoIntersightKubernetesClusterProfile","ObjectType":"workflow.WebApi","Outcomes":[],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/ClusterProfiles/{{.global.task.input.moid}}"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Delete Cisco Intersight Kubernetes Cluster Profile","Name":"Delete Cluster Profile","ObjectType":"workflow.BatchApiExecutor","Output":{},"RetryFromFailedApi":true,"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"DeleteClusterProfile\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"Body":"{\r\n    \"Name\":\"{{.global.task.input.name}}\",\r\n    \"Organization\":\"{{.security.OrganizationMoid}}\",\r\n    \"ManagementConfig\":{\r\n        \"LoadBalancerCount\":{{.global.task.input.loadbalancercount}},\r\n        \"SshUser\": \"iksadmin\",\r\n        \"SshKeys\": [\"{{.global.task.input.sshkey}}\"]\r\n    },\r\n    \"ClusterIpPools\": [{\r\n      \"ClassId\": \"mo.MoRef\",\r\n      \"Moid\": \"{{.global.task.input.ippool}}\",\r\n      \"ObjectType\": \"ippool.Pool\",\r\n      \"link\": \"https://www.intersight.com/api/v1/ippool/Pools/{{.global.task.input.ippool}}\"\r\n    }],\r\n    \"ContainerRuntimeConfig\": {\r\n      \"ClassId\": \"mo.MoRef\",\r\n      \"Moid\": \"{{.global.task.input.runtimeconfig}}\",\r\n      \"ObjectType\": \"kubernetes.ContainerRuntimePolicy\",\r\n      \"link\": \"https://www.intersight.com/api/v1/kubernetes/ContainerRuntimePolicies/{{.global.task.input.runtimeconfig}}\"\r\n    },\r\n    \"NetConfig\": {\r\n      \"ClassId\": \"mo.MoRef\",\r\n      \"Moid\": \"{{.global.task.input.netconfig}}\",\r\n      \"ObjectType\": \"kubernetes.NetworkPolicy\",\r\n      \"link\": \"https://www.intersight.com/api/v1/kubernetes/NetworkPolicies/{{.global.task.input.netconfig}}\"\r\n    },\r\n    \"SysConfig\": {\r\n      \"ClassId\": \"mo.MoRef\",\r\n      \"Moid\": \"{{.global.task.input.sysconfig}}\",\r\n      \"ObjectType\": \"kubernetes.SysConfigPolicy\",\r\n      \"link\": \"https://www.intersight.com/api/v1/kubernetes/SysConfigPolicies/{{.global.task.input.sysconfig}}\"\r\n    },\r\n    {{with $x := .global.task.input.trustedcertauth}}\r\n    \"TrustedRegistries\": {\r\n      \"ClassId\": \"mo.MoRef\",\r\n      \"Moid\": \"{{$x}}\",\r\n      \"ObjectType\": \"kubernetes.TrustedRegistriesPolicy\",\r\n      \"link\": \"https://www.intersight.com/api/v1/kubernetes/TrustedRegistriesPolicies/{{$x}}\"\r\n    },\r\n    {{end}}\r\n    \"ManagedMode\":\"Managed\"\r\n}","ContentType":"json","Description":"Create Cisco Intersight Kubernetes Cluster Profile","EndpointRequestType":"Internal","Label":"Create Cisco Intersight Kubernetes Cluster Profile","Method":"POST","Name":"CreateCiscoIntersightKubernetesClusterProfile","ObjectType":"workflow.WebApi","Outcomes":[],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"moid","ObjectType":"content.Parameter","Path":"$.Moid","Secure":false,"Type":"string"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"AssociatedClusterMoid","ObjectType":"content.Parameter","Path":"$.AssociatedCluster.Moid","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/ClusterProfiles"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Create Cisco Intersight Kubernetes Cluster Profile","Name":"Create Cluster Profile","ObjectType":"workflow.BatchApiExecutor","Output":{"associatedclustermoid":"{{.global.CreateCiscoIntersightKubernetesClusterProfile.output.AssociatedClusterMoid}}","moid":"{{.global.CreateCiscoIntersightKubernetesClusterProfile.output.moid}}"},"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"CreateClusterProfile\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"Body":"{{- if index .global.task.input \"Body\" -}}\n  {{.global.task.input.Body.Text}}\n{{- end -}}","ContentType":"{{- if index .global.task.input \"ContentType\" -}}\n  {{.global.task.input.ContentType}}\n{{- else -}}json{{- end -}}","Cookies":"{{- if index .global.task.input \"Cookies\" -}}\n  {{.global.task.input.Cookies | ToJson}}\n{{- end -}}","EndpointRequestType":"Internal","Headers":"{{- if index .global.task.input \"Headers\" -}}\n  {{.global.task.input.Headers | ToJson}}\n{{- end -}}","Method":"{{- if index .global.task.input \"Method\" -}}\n  {{.global.task.input.Method}}\n{{- else -}}GET{{- end -}}","Name":"GenericBatchApiTask","ObjectType":"workflow.WebApi","Outcomes":"{{- if index .global.task.input \"Outcomes\" -}}\n  {{.global.task.input.Outcomes | ToJson}}\n{{- end -}}","Protocol":"{{- if index .global.task.input \"Protocol\" -}}\n  {{.global.task.input.Protocol}}\n{{- else -}}https{{- end -}}","ResponseSpec":"{{- if index .global.task.input \"ResponseParser\" -}}\n  {{.global.task.input.ResponseParser | ToJson}}\n{{- end -}}","TargetType":"{{- if index .global.task.input \"Target\" -}}\n  Endpoint\n{{- else -}}Local{{- end -}}","Url":"{{.global.task.input.Url}}"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Generic Batch API Task","Name":"GenericBatchApiTask","ObjectType":"workflow.BatchApiExecutor","Output":{"Cookies":"{{- if index .global.GenericBatchApiTask.output \"HttpCookies\" -}}\n  {{.global.GenericBatchApiTask.output.HttpCookies | ToJson}}\n{{- end -}}","Headers":"{{- if index .global.GenericBatchApiTask.output \"HttpHeaders\" -}}\n  {{.global.GenericBatchApiTask.output.HttpHeaders | ToJson}}\n{{- end -}}","Parameters":"{{.global.GenericBatchApiTask.output | ToJson}}","StatusCode":"{{- if index .global.GenericBatchApiTask.output \"HttpStatusCode\" -}}\n  {{.global.GenericBatchApiTask.output.HttpStatusCode}}\n{{- end -}}","StatusMessage":"{{- if index .global.GenericBatchApiTask.output \"HttpStatusMsg\" -}}\n  {{.global.GenericBatchApiTask.output.HttpStatusMsg}}\n{{- end -}}"},"SharedScope":"shared","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"InvokeGenericWebApi\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"Body":"{\r\n  \"Addons\": [\r\n    {{range $index, $element := .global.task.input.policies}}\r\n    {\r\n      \"AddonConfiguration\": {\r\n        \"ClassId\": \"kubernetes.AddonConfiguration\",\r\n        \"InstallStrategy\": \"None\",\r\n        \"ObjectType\": \"kubernetes.AddonConfiguration\",\r\n        \"OverrideSets\": [],\r\n        \"Overrides\": \"\",\r\n        \"ReleaseName\": \"\",\r\n        \"ReleaseNamespace\": \"\",\r\n        \"UpgradeStrategy\": \"None\"\r\n      },\r\n      \"AddonPolicy\": {\r\n        \"ClassId\": \"mo.MoRef\",\r\n        \"Moid\": \"{{$element}}\",\r\n        \"ObjectType\": \"cmrf.CmRf\"\r\n      },\r\n      \"ClassId\": \"kubernetes.Addon\",\r\n      \"Name\": \"Addon-{{$index}}\",\r\n      \"ObjectType\": \"kubernetes.Addon\"\r\n    }\r\n    {{end}}\r\n  ],\r\n  \"ClassId\": \"kubernetes.ClusterAddonProfile\",\r\n  \"Moid\": \"{{.global.task.input.profile}}\",\r\n  \"ObjectType\": \"kubernetes.ClusterAddonProfile\",\r\n  \"Organization\": {\r\n    \"ClassId\": \"mo.MoRef\",\r\n    \"Moid\": \"{{.security.OrganizationMoid}}\",\r\n    \"ObjectType\": \"organization.Organization\",\r\n    \"link\": \"https://www.intersight.com/api/v1/organization/Organizations/{{.security.OrganizationMoid}}\"\r\n  }\r\n}","ContentType":"json","Description":"Modify Cisco Intersight Kubernetes Cluster AddOn Profile","EndpointRequestType":"Internal","Label":"Modify Cisco Intersight Kubernetes Cluster AddOn Profile","Method":"POST","Name":"CreateCiscoIntersightKubernetesClusterProfile","ObjectType":"workflow.WebApi","Outcomes":[],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/ClusterAddonProfiles/{{.global.task.input.profile}}"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Modify Cisco Intersight Kubernetes Cluster AddOn Profile","Name":"Modify Cluster Addon Profile","ObjectType":"workflow.BatchApiExecutor","Output":{},"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"ModifyClusterAddonProfile\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"Body":"{\r\n  \"Name\": \"{{.global.task.input.name}}\",\r\n  \"NodeType\": \"{{.global.task.input.nodetype}}\",\r\n  \"Desiredsize\": {{.global.task.input.desiredsize}},\r\n  \"Minsize\": {{.global.task.input.minsize}},\r\n  \"Maxsize\": {{.global.task.input.maxsize}},\r\n  \"KubernetesVersion\": {\r\n    \"ClassId\": \"mo.MoRef\",\r\n    \"Moid\": \"{{.global.task.input.k8sversion}}\",\r\n    \"ObjectType\": \"kubernetes.VersionPolicy\",\r\n    \"link\": \"https://www.intersight.com/api/v1/kubernetes/VersionPolicies/{{.global.task.input.k8sversion}}\"\r\n  },\r\n  \"IpPools\": [\r\n    {\r\n      \"ClassId\": \"mo.MoRef\",\r\n      \"Moid\": \"{{.global.task.input.ippool}}\",\r\n      \"ObjectType\": \"ippool.Pool\",\r\n      \"link\": \"https://www.intersight.com/api/v1/ippool/Pools/{{.global.task.input.ippool}}\"\r\n    }\r\n  ],\r\n  \"ClusterProfile\": {\r\n    \"ClassId\": \"mo.MoRef\",\r\n    \"Moid\": \"{{.global.task.input.clusterprofile}}\",\r\n    \"ObjectType\": \"kubernetes.ClusterProfile\",\r\n    \"link\": \"https://www.intersight.com/api/v1/kubernetes/ClusterProfiles/{{.global.task.input.clusterprofile}}\"\r\n  },\r\n  \"ClassId\": \"kubernetes.NodeGroupProfile\",\r\n  \"ObjectType\": \"kubernetes.NodeGroupProfile\",\r\n  \"Type\": \"instance\"\r\n}","ContentType":"json","Description":"Create Cisco Intersight Kubernetes NodeGroup Profile","EndpointRequestType":"Internal","Label":"Create Cisco Intersight Kubernetes NodeGroup Profile","Method":"POST","Name":"CreateCiscoIntersightKubernetesNodeGroupProfile","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":".local.response.HttpStatusCode ne 200","Message":"Failed to create NodeGroup Profile","Name":"HTTP Status Code Check","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"moid","ObjectType":"content.Parameter","Path":"$.Moid","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/NodeGroupProfiles"},{"Body":"{\r\n  \"ClassId\": \"kubernetes.VirtualMachineInfrastructureProvider\",\r\n  \"InfraConfigPolicy\": {\r\n    \"ClassId\": \"mo.MoRef\",\r\n    \"Moid\": \"{{.global.task.input.infraconfigpolicy}}\",\r\n    \"ObjectType\": \"kubernetes.VirtualMachineInfraConfigPolicy\",\r\n    \"link\": \"https://www.intersight.com/api/v1/kubernetes/VirtualMachineInfraConfigPolicies/{{.global.task.input.infraconfigpolicy}}\"\r\n  },\r\n  \"InstanceType\": {\r\n    \"ClassId\": \"mo.MoRef\",\r\n    \"Moid\": \"{{.global.task.input.instancetype}}\",\r\n    \"ObjectType\": \"kubernetes.VirtualMachineInstanceType\",\r\n    \"link\": \"https://www.intersight.com/api/v1/kubernetes/VirtualMachineInstanceTypes/{{.global.task.input.instancetype}}\"\r\n  },\r\n  \"Name\": \"{{.global.task.input.name}}\",\r\n  \"NodeGroup\": {\r\n    \"ClassId\": \"mo.MoRef\",\r\n    \"Moid\": \"{{.global.CreateCiscoIntersightKubernetesNodeGroupProfile.output.moid}}\",\r\n    \"ObjectType\": \"kubernetes.NodeGroupProfile\",\r\n    \"link\": \"https://www.intersight.com/api/v1/kubernetes/NodeGroupProfiles/{{.global.CreateCiscoIntersightKubernetesNodeGroupProfile.output.moid}}\"\r\n  },\r\n  \"ObjectType\": \"kubernetes.VirtualMachineInfrastructureProvider\"\r\n}","ContentType":"json","Description":"Create Cisco Intersight Kubernetes Virtual Machine Infrastructure Provider","EndpointRequestType":"Internal","Label":"Create Cisco Intersight Kubernetes Virtual Machine Infrastructure Provider","Method":"POST","Name":"CreateCiscoIntersightKubernetesVirtualMachineInfrastructureProvider","ObjectType":"workflow.WebApi","Outcomes":[],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"moid","ObjectType":"content.Parameter","Path":"$.Moid","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/VirtualMachineInfrastructureProviders"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Create Cisco Intersight Kubernetes NodeGroup Profile","Name":"Create NodeGroup Profile","ObjectType":"workflow.BatchApiExecutor","Output":{"moid":"{{.global.CreateCiscoIntersightKubernetesNodeGroupProfile.output.moid}}"},"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"CreateNodeGroupProfile\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","Description":"Validate Cisco Intersight Kubernetes Cluster Profile State","EndpointRequestType":"Internal","Label":"Validate Cisco Intersight Kubernetes Cluster Profile State","Method":"GET","Name":"ValidateCiscoIntersightKubernetesClusterProfileState","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ne .global.ValidateCiscoIntersightKubernetesClusterProfileState.output.ControlAction \"No-op\") (ne .global.ValidateCiscoIntersightKubernetesClusterProfileState.output.ControlAction \"\") }}","Message":"Waiting for Cluster Profile changes to be applied","Name":"Wait until Cluster Profile is not being changed","Type":"Status"},{"Condition":"{{ or (eq .global.ValidateCiscoIntersightKubernetesClusterProfileState.output.ControlAction \"No-op\") (eq .global.ValidateCiscoIntersightKubernetesClusterProfileState.output.ControlAction \"\") }}","Message":"Cluster Profile is ready to be deployed","Name":"Cluster Profile is ready","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ControlAction","ObjectType":"content.Parameter","Path":"$.ConfigContext.ControlAction","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/ClusterProfiles/{{.global.task.input.moid}}"},{"Body":"{\"Action\":\"Undeploy\"}","ContentType":"json","Description":"Undeploy Cisco Intersight Kubernetes Cluster Profile","EndpointRequestType":"Internal","Label":"Undeploy Cisco Intersight Kubernetes Cluster Profile","Method":"POST","Name":"UndeployCiscoIntersightKubernetesClusterProfile","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":".local.response.HttpStatusCode ne 200","Message":"Failed to undeploy Cluster Profile","Name":"HTTP Status Code Check","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/ClusterProfiles/{{.global.task.input.moid}}"},{"ContentType":"json","Description":"Wait for Cisco Intersight Kubernetes Cluster Profile undeployment","EndpointRequestType":"Internal","Label":"Wait for Cisco Intersight Kubernetes Cluster Profile undeployment","Method":"GET","Name":"WaitforCiscoIntersightKubernetesClusterProfileundeployment","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ or (eq .global.WaitforCiscoIntersightKubernetesClusterProfileundeployment.output.ControlAction \"Deploy\") (eq .global.WaitforCiscoIntersightKubernetesClusterProfileundeployment.output.ControlAction \"Undeploy\") }}","Message":"Waiting for Cluster Profile to be undeployed","Name":"Wait until Cluster Profile is not being changed","ObjectType":"workflow.Outcome","Type":"Status"},{"Condition":"{{ or (eq .global.WaitforCiscoIntersightKubernetesClusterProfileundeployment.output.ControlAction \"No-op\") (eq .global.WaitforCiscoIntersightKubernetesClusterProfileundeployment.output.ControlAction \"\") }}","Message":"Cluster Undeployment finished","Name":"Cluster Undeployment finished","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ControlAction","ObjectType":"content.Parameter","Path":"$.ConfigContext.ControlAction","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/ClusterProfiles/{{.global.task.input.moid}}"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Undeploy Cisco Intersight Kubernetes Cluster Profile","Name":"Undeploy Cluster Profile","ObjectType":"workflow.BatchApiExecutor","Output":{},"RetryFromFailedApi":true,"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"UndeployClusterProfile\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","Description":"Validate Cisco Intersight Kubernetes Cluster Profile State","EndpointRequestType":"Internal","Label":"Validate Cisco Intersight Kubernetes Cluster Profile State","Method":"GET","Name":"ValidateCiscoIntersightKubernetesClusterProfileState","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ or (eq .global.ValidateCiscoIntersightKubernetesClusterProfileState.output.ControlAction \"Deploy\") (eq .global.ValidateCiscoIntersightKubernetesClusterProfileState.output.ControlAction \"Undeploy\") }}","Message":"Waiting for Cluster Profile changes to be applied","Name":"Wait until Cluster Profile is not being changed","ObjectType":"workflow.Outcome","Type":"Status"},{"Condition":"{{ or (eq .global.ValidateCiscoIntersightKubernetesClusterProfileState.output.ControlAction \"No-op\") (eq .global.ValidateCiscoIntersightKubernetesClusterProfileState.output.ControlAction \"\") }}","Message":"Cluster Profile is ready to be deployed","Name":"Cluster Profile is ready","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ControlAction","ObjectType":"content.Parameter","Path":"$.ConfigContext.ControlAction","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/ClusterProfiles/{{.global.task.input.moid}}"},{"Body":"{\"Action\":\"Deploy\"}","ContentType":"json","Description":"Deploy Cisco Intersight Kubernetes Cluster Profile","EndpointRequestType":"Internal","Label":"Deploy Cisco Intersight Kubernetes Cluster Profile","Method":"POST","Name":"DeployCiscoIntersightKubernetesClusterProfile","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":".local.response.HttpStatusCode ne 200","Message":"Failed to deploy Cluster Profile","Name":"HTTP Status Code Check","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":".local.response.HttpStatusCode eq 200","Message":"Deployment successfully started","Name":"HTTP Status Code Check Success","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/ClusterProfiles/{{.global.task.input.moid}}"},{"ContentType":"json","Description":"Wait for Cisco Intersight Kubernetes Cluster Profile deployment","EndpointRequestType":"Internal","Label":"Wait for Cisco Intersight Kubernetes Cluster Profile deployment","Method":"GET","Name":"WaitforCiscoIntersightKubernetesClusterProfiledeployment","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ eq .global.WaitforCiscoIntersightKubernetesClusterProfiledeployment.output.ConfigState \"Failed\" }}","Message":"Profile Deployment failed - please undeploy the profile and try again","Name":"ConfigState is Failed","Type":"TerminalError"},{"Condition":"{{ or (eq .global.WaitforCiscoIntersightKubernetesClusterProfiledeployment.output.ControlAction \"Deploy\") (eq .global.WaitforCiscoIntersightKubernetesClusterProfiledeployment.output.ControlAction \"Undeploy\") }}","Message":"Waiting for Cluster Profile to be deployed","Name":"Wait until Cluster Profile is not being changed","ObjectType":"workflow.Outcome","Type":"Status"},{"Condition":"{{ or (eq .global.WaitforCiscoIntersightKubernetesClusterProfiledeployment.output.ControlAction \"No-op\") (eq .global.WaitforCiscoIntersightKubernetesClusterProfiledeployment.output.ControlAction \"\") }}","Message":"Cluster Deployment finished","Name":"Cluster Deployment finished","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ControlAction","ObjectType":"content.Parameter","Path":"$.ConfigContext.ControlAction","Secure":false,"Type":"string"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"ConfigState","ObjectType":"content.Parameter","Path":"$.ConfigContext.ConfigState","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Local","Url":"/api/v1/kubernetes/ClusterProfiles/{{.global.task.input.moid}}"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Deploy Cisco Intersight Kubernetes Cluster Profile","Name":"Deploy Cluster Profile","ObjectType":"workflow.BatchApiExecutor","Output":{},"RetryFromFailedApi":true,"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"DeployClusterProfile\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"}]